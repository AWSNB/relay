



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Sentry">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.2">
    
    
      
        <title>Sentry Relay</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@7.1.2/dist/mermaid.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="Sentry Relay" aria-label="Sentry Relay" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Sentry Relay
            </span>
            <span class="md-header-nav__topic">
              
                Introduction
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/getsentry/relay/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="." title="Sentry Relay" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Sentry Relay
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/getsentry/relay/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Introduction
      </label>
    
    <a href="." title="Introduction" class="md-nav__link md-nav__link--active">
      Introduction
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-cases-for-relay" class="md-nav__link">
    Use Cases for Relay
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scrubbing-personally-identifiable-information-pii" class="md-nav__link">
    Scrubbing Personally Identifiable Information (PII)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-response-time" class="md-nav__link">
    Improved Response Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enterprise-domain-name" class="md-nav__link">
    Enterprise Domain Name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initializing-configuration" class="md-nav__link">
    Initializing Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#credentials" class="md-nav__link">
    Credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-relay-with-sentry" class="md-nav__link">
    Registering Relay with Sentry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-relay" class="md-nav__link">
    Running Relay
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-in-docker" class="md-nav__link">
    Running in Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending-a-test-event" class="md-nav__link">
    Sending a Test Event
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Advanced Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Advanced Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="configuration/modes/" title="Relay Modes" class="md-nav__link">
      Relay Modes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="configuration/options/" title="Configuration Options" class="md-nav__link">
      Configuration Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="configuration/metrics/" title="Errors and Metrics" class="md-nav__link">
      Errors and Metrics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="configuration/projects/" title="Project Configuration" class="md-nav__link">
      Project Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      PII and Data Scrubbing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        PII and Data Scrubbing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="pii-config/" title="PII Configuration" class="md-nav__link">
      PII Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="pii-config/types/" title="PII Rule Types" class="md-nav__link">
      PII Rule Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="pii-config/methods/" title="PII Redaction Methods" class="md-nav__link">
      PII Redaction Methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="pii-config/selectors/" title="PII Selectors" class="md-nav__link">
      PII Selectors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Architecture
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Architecture
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="architecture/actors/" title="Actors" class="md-nav__link">
      Actors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="architecture/ingest-event-path/" title="Path of an Event through Relay" class="md-nav__link">
      Path of an Event through Relay
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="architecture/project-configuration/" title="Project configuration" class="md-nav__link">
      Project configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-cases-for-relay" class="md-nav__link">
    Use Cases for Relay
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scrubbing-personally-identifiable-information-pii" class="md-nav__link">
    Scrubbing Personally Identifiable Information (PII)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improved-response-time" class="md-nav__link">
    Improved Response Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enterprise-domain-name" class="md-nav__link">
    Enterprise Domain Name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initializing-configuration" class="md-nav__link">
    Initializing Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#credentials" class="md-nav__link">
    Credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-relay-with-sentry" class="md-nav__link">
    Registering Relay with Sentry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-relay" class="md-nav__link">
    Running Relay
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-in-docker" class="md-nav__link">
    Running in Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sending-a-test-event" class="md-nav__link">
    Sending a Test Event
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/getsentry/relay/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="introduction">Introduction</h1>
<p align="center">
  <p align="center">
    <img src="https://github.com/getsentry/relay/blob/master/artwork/relay-logo.png?raw=true" alt="Relay" width="480">
  </p>
</p>

<p>Sentry Relay is a standalone service that allows you to scrub personal
information and improve event response time. It acts as a middle layer between
your application and Sentry.io.</p>
<p><strong>Relay is still work in progress.</strong></p>
<h2 id="use-cases-for-relay">Use Cases for Relay</h2>
<p>Relay was designed with a few usage scenarios in mind.</p>
<h3 id="scrubbing-personally-identifiable-information-pii">Scrubbing Personally Identifiable Information (PII)</h3>
<p>Sentry allows to scrub PII in two places: in the SDK before sending the event,
and upon arrival on Sentry's infrastructure. Relay adds a third option that
allows to scrub data in a central place before sending it to Sentry.</p>
<p>To choose the right place for data scrubbing, consider:</p>
<ul>
<li>
<p>If you prefer to configure data scrubbing in a central place, you can let
  Sentry handle data scrubbing. Upon arrival, Sentry immediatly applies
  <a href="https://docs.sentry.io/data-management/sensitive-data/#server-side-scrubbing">server-side scrubbing</a> and guaratees that personal information is never
  stored.</p>
</li>
<li>
<p>If you cannot send PII outside your infrastructure but you still prefer to
  configure data scrubbing in one centralized place, run Relay and configure
  your SDKs to send events there. Relay uses the privacy settings configured in
  Sentry, and scrubs PII before forwarding data to Sentry.</p>
</li>
<li>
<p>For the most strict data privacy requirements, you can configure SDKs to scrub
  PII using the <a href="https://docs.sentry.io/error-reporting/configuration/?platform=rust#before-send">before_send hooks</a>, which prevents data from being collected
  on the device. This may require you to replicate the same logic across your
  applications and could lead to a performance impact.</p>
</li>
</ul>
<h3 id="improved-response-time">Improved Response Time</h3>
<p>Relay is designed to respond very quickly to requests. Having Relay installed
close to your infrastructure will further improve the response when sending
events.</p>
<p>This can particularly reduce the roundtrip time in remote locations.</p>
<h3 id="enterprise-domain-name">Enterprise Domain Name</h3>
<p>By default, SDKs need to be configured with a DSN that points to <code>sentry.io</code>. If
you need to restrict all HTTP communication to a custom domain name, Relay can
act as an opaque proxy that reliably forwards events to Sentry.</p>
<h2 id="getting-started">Getting Started</h2>
<p>In this section we will create a simple setup using the default settings. Check
the <em><a href="../options">Configuration Options</a></em> page for a detail discussion
of various operating scenarious for Relay.</p>
<p>The Relay server is called <code>relay</code>. Binaries can be downloaded from <a href="https://github.com/getsentry/relay/releases">GitHub
Releases</a> and a Docker image is provided on <a href="https://hub.docker.com/r/getsentry/relay/">DockerHub</a>.</p>
<h3 id="initializing-configuration">Initializing Configuration</h3>
<p>In order to create the initial configuration, Relay provides the <code>relay config
init</code> command. The command puts configuration files in the <code>.relay</code> folder
under the current working directory:</p>
<div class="codehilite"><pre><span></span><code>❯ ./relay config init
Initializing relay in /&lt;current_directory&gt;/.relay
Do you want to create a new config?:
&gt; Yes, create default config
  Yes, create custom config
  No, abort
</code></pre></div>

<p>Selecting the default configuration will create a minimal configuration file.
Alternatively, you can choose to override the default settings, by selecting
<em>*"create custom config"</em>. This allows you to customize the following basic
parameters:</p>
<ul>
<li>The <code>mode</code> setting configures the major mode in which Relay operates. For more
  information on available relay modes, refer to <em><a href="./configuration/modes">Relay Modes</a></em>.</li>
<li>The <code>upstream</code> setting configures the server to which Relay will forward the
  events (by default the main <code>sentry.io</code> URL).</li>
<li>The <code>port</code> and <code>host</code> settings configure the TCP port at which Relay will
  listen to. This is the address to which SDKs send events.</li>
<li>The <code>tls</code> settings configure TLS support (HTTPS support), used for
  the cases where the communication between the SDK and Relay needs to be
  secured.</li>
</ul>
<p>Settings are placed in <code>.relay/config.yml</code>. Note that all configuration values are optional and default to these settings:</p>
<div class="codehilite"><pre><span></span><code><span class="nn">---</span>
<span class="nt">relay</span><span class="p">:</span>
  <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">managed</span>
  <span class="nt">upstream</span><span class="p">:</span> <span class="s">&quot;https://sentry.io/&quot;</span>
  <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3000</span>
  <span class="nt">tls_port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
  <span class="nt">tls_identity_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
  <span class="nt">tls_identity_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~</span>
</code></pre></div>

<p>All configurations are explained in detail in the section <a href="../options">Configuration
Options</a>.</p>
<h3 id="credentials">Credentials</h3>
<p>Besides <code>config.yml</code>, the <code>init</code> command has also created a credentials file <code>credentials.json</code> in the same <code>.relay</code> directory. This file contains the a public and private key used by Relay to authenticate with the upstream server.</p>
<p><strong>As such, it is important that this file should be adequatly protected from modification or viewing by unauthorized entities</strong>.</p>
<p>Here's an example of the contents of a typical credentials file:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;5gkTAfwOrJ0lMy9aOAOmHKO1k6gd8ApYkAInmg5VfWk&quot;</span><span class="p">,</span>
  <span class="nt">&quot;public_key&quot;</span><span class="p">:</span> <span class="s2">&quot;fQzvlvqLM2pJwLDwM_sXD2Lk5swzx-Oml4WhsOquon4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;cde0d72e-0c4e-4550-a934-c1867d8a177c&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p>You will be using the <code>public_key</code> to register your Relay with the upstream server when running it in <code>managed</code> mode.</p>
<h3 id="registering-relay-with-sentry">Registering Relay with Sentry</h3>
<p>To operate in <code>managed</code> mode, Relay pulls configuration for PII stripping,
filtering, and rate limiting from your organization and project settings at
Sentry. Since these settings may contain sensitive information, their access is
restricted by Sentry and requires authorization.</p>
<p>In order to register Relay with Sentry, get the contents of the public key,
either by inspecting the <code>credentials.json</code> file or by running:</p>
<div class="codehilite"><pre><span></span><code>❯ ./relay credentials show
Credentials:
  relay id: 8cd24a0e-384d-4052-9010-68a21392b33c
  public key: nDJl79SbEYH9-8NEJAI7ezrgYfolPW3Bnkg00k1zOfA
</code></pre></div>

<p>After copying the public key, go to the organization settings in Sentry by clicking on <em>Settings</em> in the main navigation on the left, then go to <em>Relays</em>.</p>
<p align="center">
    <img src="img/add-relay-key.png" alt="Relays Settings" />
</p>

<p>Click <em>New Relay Key</em> to add the key and save it:</p>
<p align="center">
    <img src="img/edit-relay-key.png" alt="Add Relay Key" >
</p>

<p>Now your Relay is registered with Sentry and ready to send messages. See
<a href="../options">Configuration Options</a> page to learn more about further Relay configuration
options.</p>
<h3 id="running-relay">Running Relay</h3>
<p>Once you have registered your Relay with Sentry, you are ready to run your
Relay:</p>
<div class="codehilite"><pre><span></span><code>❯ relay run
 INFO  relay::setup &gt; launching relay from config folder .relay
 INFO  relay::setup &gt;   relay mode: managed
 INFO  relay::setup &gt;   relay id: f2119bc9-9a9b-4531-826b-24e9794902f2
 INFO  relay::setup &gt;   public key: QPBITKKtKUuEZGGbPke8iufEXAcVrEv6nmWrkRtc3l8
 ...
 DEBUG relay::server::upstream &gt; relay successfully registered with upstream
</code></pre></div>

<p>If you moved your config folder somewhere else (e.g. for security reasons), you can use the <code>--config</code> option to specify the location:</p>
<div class="codehilite"><pre><span></span><code>❯ relay run --config ./my/custom/relay_folder/
</code></pre></div>

<h3 id="running-in-docker">Running in Docker</h3>
<p>As an alternative to directly running the Relay binary, Sentry also provides a Docker image that can be used to run Relay. It can be found on <a href="https://hub.docker.com/r/getsentry/relay/">DockerHub</a>.</p>
<p>Similar to directly running the <code>relay</code> binary, running the docker image needs a
directory in which it can find the configuration and credentials files
(<code>config.yml</code> and <code>credentials.json</code>). Providing the configuration directory can
be done with the standard mechanisms offered by docker, either by mounting
<a href="https://docs.docker.com/storage/volumes/">docker volumes</a> or by building a new container and copying the files in.</p>
<p>For example, you can start the latest version of <code>relay</code> as follows:</p>
<div class="codehilite"><pre><span></span><code>❯ docker run -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/configs/:/work/.relay/ getsentry/relay run
</code></pre></div>

<p>This example command assumes that Relay's configuration (<code>config.yml</code> and <code>credentials.json</code>) are stored in <code>./configs/</code> directory on the host machine.</p>
<h3 id="sending-a-test-event">Sending a Test Event</h3>
<p>Once Relay is running and authenticated with Sentry, it is time to send a test event.</p>
<p>Get the DSN of your project by navigating to your <em>Project Settings &gt; Client Keys (DSN)</em>. From the <em>Client Keys</em> page, get the DSN, which looks something like:</p>
<div class="codehilite"><pre><span></span><code><span class="c">https://12345abcdb1e4c123490ecec89c1f199@o1.ingest.sentry.io/2244</span>
</code></pre></div>

<p>Next, replace parts of the DSN to match the address at which Relay is reachable. For instance, if Relay listens at <code>http://localhost:3000</code>, change the protocol and host of the DSN to:</p>
<div class="codehilite"><pre><span></span><code><span class="c">http://12345abcdb1e4c123490ecec89c1f199@localhost:3000/2244</span>
</code></pre></div>

<p>Use the new DSN in your SDK configuration. To test this, you can send a message with <code>sentry-cli</code>:</p>
<div class="codehilite"><pre><span></span><code>❯ <span class="nb">export</span> <span class="nv">SENTRY_DSN</span><span class="o">=</span><span class="s1">&#39;http://12345abcdb1e4c123490ecec89c1f199@127.0.0.1:3000/2244&#39;</span>
❯ sentry-cli send-event -m <span class="s1">&#39;A test event&#39;</span>
</code></pre></div>

<p>After a few seconds, the event should appear in the issues stream in your
project.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="configuration/modes/" title="Relay Modes" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Relay Modes
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
        <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
      
    
  </body>
</html>